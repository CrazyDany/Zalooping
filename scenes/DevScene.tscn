[gd_scene load_steps=20 format=3 uid="uid://cuopftxmsy0qt"]

[ext_resource type="Script" uid="uid://jyn6mt4holxb" path="res://scripts/game_manager.gd" id="1_af5vw"]
[ext_resource type="Script" uid="uid://hvlxna0wqah0" path="res://common/base_entity/base_entity.gd" id="2_wh54w"]
[ext_resource type="Script" uid="uid://ctbwrl8c027kr" path="res://common/base_action/base_action.gd" id="3_3n5q5"]
[ext_resource type="Texture2D" uid="uid://dccuek472u8v3" path="res://assets/player_placeholder.png" id="4_cpykq"]
[ext_resource type="Texture2D" uid="uid://bc7jf25wf4ojt" path="res://assets/enemy_0.png" id="5_3n5q5"]

[sub_resource type="Resource" id="Resource_3n5q5"]
script = ExtResource("3_3n5q5")
step_length = 1
end = false
on_action_add_states = Dictionary[String, int]({})
on_action_animation_name = "idle"
on_action_add_block = false
on_action_enemy_attack = 0.0
metadata/_custom_type_script = "uid://ctbwrl8c027kr"

[sub_resource type="Resource" id="Resource_rtbar"]
script = ExtResource("3_3n5q5")
step_length = 1
end = true
on_action_add_states = Dictionary[String, int]({})
on_action_animation_name = "attack"
on_action_add_block = false
on_action_enemy_attack = 10.0
metadata/_custom_type_script = "uid://ctbwrl8c027kr"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wh54w"]
size = Vector2(11, 7)

[sub_resource type="Animation" id="Animation_eju2h"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:skew")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_rtbar"]
resource_name = "attack"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:rotation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.533333),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.647908, -0.0458199, 0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:scale")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.196667, 0.366667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0.830324, 1.56716), Vector2(1.11827, 0.911904), Vector2(1, 1)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:skew")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.19734),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.486947, 0.0]
}

[sub_resource type="Animation" id="Animation_3n5q5"]
resource_name = "idle"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 0.307786),
"update": 0,
"values": [Vector2(1.1, 0.9), Vector2(1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_rtbar"]
_data = {
&"RESET": SubResource("Animation_eju2h"),
&"attack": SubResource("Animation_rtbar"),
&"idle": SubResource("Animation_3n5q5")
}

[sub_resource type="Resource" id="Resource_eju2h"]
script = ExtResource("3_3n5q5")
step_length = 1
end = true
on_action_add_states = Dictionary[String, int]({})
on_action_animation_name = "idle"
on_action_add_block = false
on_action_enemy_attack = 0.0
metadata/_custom_type_script = "uid://ctbwrl8c027kr"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_eju2h"]
size = Vector2(10, 10)

[sub_resource type="Animation" id="Animation_20uoo"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:self_modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:skew")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_q2byh"]
resource_name = "hurt"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:self_modulate")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0.955922, 0.425058, 0.50203, 1), Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:skew")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.233333),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.102974, 0.0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:rotation")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.233333, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.291488, -0.126055, 0.0]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:scale")
tracks/3/interp = 2
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.333333, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0.823818, 1.41352), Vector2(1.15974, 0.84252), Vector2(1, 1)]
}

[sub_resource type="Animation" id="Animation_s8o21"]
resource_name = "idle"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.433333, 0.566667, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(1.05, 0.95), Vector2(1.05, 0.95), Vector2(1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_q2byh"]
_data = {
&"RESET": SubResource("Animation_20uoo"),
&"hurt": SubResource("Animation_q2byh"),
&"idle": SubResource("Animation_s8o21")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3n5q5"]
size = Vector2(512, 54)

[node name="DevScene" type="Node2D"]
script = ExtResource("1_af5vw")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Entities" type="Node2D" parent="."]

[node name="Player" type="CharacterBody2D" parent="Entities" node_paths=PackedStringArray("animation_player")]
position = Vector2(87, 320)
script = ExtResource("2_wh54w")
algorithm = Array[ExtResource("3_3n5q5")]([SubResource("Resource_3n5q5"), SubResource("Resource_rtbar")])
animation_player = NodePath("AnimationPlayer")
metadata/_custom_type_script = "uid://hvlxna0wqah0"

[node name="Sprite2D" type="Sprite2D" parent="Entities/Player"]
position = Vector2(1, 1.35899e-05)
texture = ExtResource("4_cpykq")
offset = Vector2(0, -8)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Entities/Player"]
position = Vector2(0.5, -3.5)
shape = SubResource("RectangleShape2D_wh54w")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Entities/Player"]
libraries = {
&"": SubResource("AnimationLibrary_rtbar")
}

[node name="Enemy" type="CharacterBody2D" parent="Entities" node_paths=PackedStringArray("animation_player")]
position = Vector2(112, 320)
script = ExtResource("2_wh54w")
algorithm = Array[ExtResource("3_3n5q5")]([SubResource("Resource_eju2h")])
animation_player = NodePath("AnimationPlayer")
metadata/_custom_type_script = "uid://hvlxna0wqah0"

[node name="Sprite2D" type="Sprite2D" parent="Entities/Enemy"]
texture = ExtResource("5_3n5q5")
offset = Vector2(1, -8)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Entities/Enemy"]
position = Vector2(1, -5)
shape = SubResource("RectangleShape2D_eju2h")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Entities/Enemy"]
libraries = {
&"": SubResource("AnimationLibrary_q2byh")
}

[node name="StaticBody2D" type="StaticBody2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2(236, 347)
shape = SubResource("RectangleShape2D_3n5q5")
one_way_collision_margin = 0.0
debug_color = Color(0, 0, 0, 0.42)

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(99, 303)
zoom = Vector2(2, 2)
